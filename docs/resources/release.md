---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "terrahelm_release Resource - terraform-provider-terrahelm"
subcategory: ""
description: |-
  Helm chart release management
---

# terrahelm_release (Resource)

Helm chart release management

## Usage Examples

### Deploying Helm Chart from Helm Repository

```hcl
resource "terrahelm_release" "mysql" {
  name             = "mysql"
  chart_repository = "bitnami"
  chart_path       = "mysql"
}

output "mysql_release_status" {
  value = terrahelm_release.mysql.release_status
}
```

### Deploying Helm Chart from Git Repository

```hcl
resource "terrahelm_release" "nginx" {
  name             = "nginx"
  git_repository   = "https://github.com/bitnami/charts.git"
  git_reference    = "main"
  chart_path       = "bitnami/nginx"
  namespace        = "nginx"
  create_namespace = true

  values = <<EOF
  replicaCount: 1
  EOF
}
```

#### Deploying Helm Chart from the File System

```hcl
resource "terrahelm_release" "local_chart" {
  name             = "local-chart"
  chart_repository = "/path/to/charts"
  chart_path       = "my-chart"
}
```

## Advanced Use Cases

### Deploying Helm Chart from Remote Sources using chart_url

```hcl
# Local chart
resource "terrahelm_release" "local_chart" {
  name      = "local-chart"
  chart_url = "file::path/to/local/chart.tgz"
}
```

```hcl
# Remote chart using https
resource "terrahelm_release" "git_chart" {
  name      = "git-chart"
  chart_url = "github.com/kubernetes/ingress-nginx//charts/ingress-nginx?ref=helm-chart-4.8.3&depth=1"
}
```

```hcl
# Remote chart using git client
resource "terrahelm_release" "git_chart" {
  name      = "git-chart"
  chart_url = "git::git@github.com:bitnami/charts.git//bitnami/nginx?depth=1"
}
```

**Supported chart_url parameters:**
- `ref` - The Git ref to checkout. This is a ref, so it can point to a commit SHA, a branch name, etc.
- `sshkey` - An SSH private key to use during clones. The provided key must be a base64-encoded string. For example, to generate a suitable sshkey from a private key file on disk, you would run base64 -w0 <file>.
- `depth` - The Git clone depth. The provided number specifies the last n revisions to clone from the repository.

#### Mercurial

```hcl
resource "terrahelm_release" "hg_chart" {
  name      = "hg-chart"
  chart_url = "hg::https://example.com/hg/repo//chart?rev=123"
}
```

#### HTTP(s)

```hcl
resource "terrahelm_release" "http_chart" {
  name      = "http-chart"
  chart_url = "https://charts.bitnami.com/bitnami/nginx-15.12.2.tgz//nginx"
}
```

To use HTTP basic authentication, prepend `username:password@` to the hostname.

#### Amazon S3

```hcl
resource "terrahelm_release" "s3_chart" {
  name      = "s3-chart"
  chart_url = "s3::https://s3.amazonaws.com/bucket/chart.tgz"
}
```

```hcl
resource "terrahelm_release" "s3_chart" {
  name      = "s3-chart"
  chart_url = "bucket.s3-eu-west-1.amazonaws.com/bucket/chart"
}
```

**Supported AWS S3 parameters:**
- `aws_access_key_id` - AWS access key.
- `aws_access_key_secret` - AWS access key secret.
- `aws_access_token` - AWS access token if this is being used.
- `aws_profile` - Use this profile from local `~/.aws/ config`. Takes priority over key and token.
- `region` - AWS regions to use.

Note: it will also read these from standard AWS environment variables if they're set.

#### Google GCP

```hcl
resource "terrahelm_release" "gcp_chart" {
  name      = "gcp-chart"
  chart_url = "www.googleapis.com/storage/v1/bucket/chart"
}
```

```hcl
resource "terrahelm_release" "gcp_chart" {
  name      = "gcp-chart"
  chart_url = "gcs::https://www.googleapis.com/storage/v1/bucket/chart.zip"
}
```

## Flexible Values Handling

TerraHelm provides a flexible way to handle values files, allowing you to specify values files from various sources, such as local files, URLs, or files relative to the chart repository. This approach offers a powerful way to store values files outside Terraform in a IaC compatible manner, enabling the use of separate repositories for the chart and value files. Notably, `values_files` supports most of the parameters from `chart_url`, allowing leverage diverse storage solutions for each individual file.

```hcl
resource "terrahelm_release" "nginx" {
  name       = "nginx"
  namespace  = "nginx"

  chart_url  = "github.com/mikhae1/terraform-provider-terrahelm//tests/charts/?ref=master&depth=1"
  chart_path = "./nginx"

  # fetch value files from various sources
  values_files = [
    "./values/nginx/common.yaml", # relative to chart directory
    "https://raw.githubusercontent.com/mikhae1/terraform-provider-terrahelm/master/tests/charts/values/nginx/dev-values.yaml",
  ]

  # override values from value files
  values = <<EOF
  image:
    tag: "1.25.4
  EOF
}
```

## Safely Inject Secrets with Post Renderer

```hcl
resource "terrahelm_release" "postrender" {
  name              = "nginx"
  chart_url         = "github.com/mikhae1/terraform-provider-terrahelm//tests/charts/?ref=master&depth=1"
  post_renderer_url = "https://github.com/mikhae1/secfetch/releases/latest/download/secfetch-darwin-amd64.zip"
  ...

  # The post renderer will substitute # ssm://... URLs by fetching them from AWS Systems Manager Parameter Store
  # and replacing the URL with its corresponding value.
  values = <<EOF
  basicAuth:
    enabled: true
    username: "ssm://path/to/username"    # -> get /path/to/username from AWS SSM and replace the URL
    password: "ssm://path/to/password"    # -> get /path/to/password from AWS SSM and replace the URL
  EOF
}
```

When using Helm 4, TerraHelm wraps the resolved post-renderer command into a temporary postrenderer plugin stored in the TerraHelm cache directory and sets `HELM_PLUGINS` to that cache path so Helm can discover it.

When `chart_repository` is an HTTP(S) URL, TerraHelm passes it to Helm using `--repo` and uses `chart_path` as the chart name.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the Helm release

### Optional

- `atomic` (Boolean) Whether to roll back the Helm chart installation if it fails
- `chart_path` (String) The relative path to the Helm chart
- `chart_repository` (String) URL of the chart repository containing the Helm chart, Helm cli is used for downloading
- `chart_url` (String) URL to the Helm chart, it supports advanced parameters, archives and variety of protocols: http::, file::, s3::, gcs::, hg::
- `chart_version` (String) The version of the Helm chart to install
- `create_namespace` (Boolean) Whether to create the Kubernetes namespace if it does not exist
- `custom_args` (List of String) Additional arguments to pass to the Helm CLI
- `debug` (Boolean) Enable debug mode for the Helm CLI
- `git_reference` (String) Reference (e.g. branch, tag, commit hash) to checkout in the Git repository
- `git_repository` (String) URL of the git repository containing the Helm chart, git cli is used for downloading)
- `insecure` (Boolean) Disable checking certificates (not safe)
- `max_retries` (Integer) The maximum number of retry attempts for downloading remote resources (default is 0, no retries)
- `namespace` (String) The Kubernetes namespace where the Helm chart will be installed
- `post_renderer` (String) Post-renderer command to run
- `post_renderer_url` (String) URL of the post-renderer script to download and use
- `retry_delay` (String) The delay between retry attempts for downloading remote resources (default is 0s)
- `timeout` (String) The maximum time to wait for the Helm chart installation to complete
- `values` (String) A YAML string representing the values to be passed to the Helm chart
- `values_files` (List of String) A list of the values file names or URLs to be passed to the Helm chart
- `wait` (Boolean) Whether to wait for the Helm chart installation to complete

### Read-Only

- `id` (String) The ID of this resource.
- `release_chart_name` (String) The name of the installed Helm chart
- `release_chart_version` (String) The version of the installed Helm chart
- `release_revision` (String) The revision of the installed Helm release
- `release_status` (String) The current status of the installed Helm release
- `release_values` (Map of String) The values passed to the Helm chart at installation time
